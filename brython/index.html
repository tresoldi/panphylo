<!DOCTYPE html>
<html lang="en">

<head>
	<!-- HTML standard properties -->
	<title>Panphylo web interface</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Web interface for the panphylo tool for converting phylogenetic data">
	<meta name="author" content="Tiago Tresoldi">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

	<!-- Brython scripts -->
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython/brython.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython/brython_stdlib.js"></script>
</head>

<body onload="brython()">

	<script type="text/python">

from browser import document

import panphylo.tabular as tabular
import panphylo.nexus as nexus
    
def action(event):
    source_elm = document["source"]
    target_elm = document["target"]
    args = {"from": "csv", "to": "nexus", "input":"-",
"i_taxa":None, "i_char":None, "i_state":None}

    source = source_elm.value
    phyd = tabular.read_data_tabular(source, ",", args)
    target = nexus.build_nexus(phyd, args)
    target_elm.innerHTML = target

# Associate function action() to the event "click" on all buttons
convert_button = document["convert"]
convert_button.bind("click", action)
for button in document.select("td"):
    button.bind("click", action)
    </script>

	<div class="col-lg-8 mx-auto p-3 py-md-5">


		<header class="d-flex align-items-center pb-3 mb-5 border-bottom">
			<a href="https://evotext.se/" class="d-flex align-items-center text-dark text-decoration-none">
				<img src="ceot.jpg" style="height: 4em;" class="rounded" alt="CEOT logo">
				&nbsp;&nbsp;&nbsp;
				<span class="fs-4">CEoT - Cultural Evolution of Texts @ UU.SE</span>
			</a>
		</header>



		<main>

			<h1>Panphylo web interface</h1>

			<!-- <p class="fs-5 col-md-8"></p> -->

			<p>This interface allows to use <a href="https://github.com/tresoldi/panphylo">panphylo</a> for
				converting between phylogenetic data formats, especially for studies on textual evolution. For
				more options, please install and use the library locally.</p>
			<p>The interface runs Python code directly in the browser via <a href="https://brython.info/">Brython</a>,
				so that no data is sent to remote servers.</p>
			<hr />

			<div class="container">
				<div class="row">
					<div class="col">
						<label for="from-field">From</label>
						<select name="form-field" id="from-field">
							<option value="auto">Autodetect</option>
							<option value="csv">CSV</option>
							<option value="tsv">TSV</option>
							<option value="nexus">Nexus</option>
							<option value="phylip">Phylip</option>
						</select>
					</div>
					<div class="col">
						<label for="to-field">To</label>
						<select name="to-field" id="to-field">
							<option value="nexus">Nexus</option>
							<option value="csv">CSV</option>
							<option value="tsv">TSV</option>
							<option value="phylip">Phylip</option>
						</select>
					</div>
					<div class="col">
						<input class="form-check-input" type="checkbox" value="" id="binarize">
						<label class="form-check-label" for="binarize">Binarize</label>
					</div>
					<div class="col">
						<button id="convert" class="btn btn-primary">Convert</button>
					</div>
				</div>

				<!-- spacer -->
				<div class="row">&nbsp;</div>

				<div class="row">
					<div class="col align-self-start">
						<textarea style="white-space: pre-wrap; font-family:monospace; min-width: 100%;" rows="8"
							id="source" placeholder="(enter text)"></textarea>
					</div>
				</div>

				<!-- spacer -->
				<div class="row">&nbsp;</div>

				<div class="row">
					<div class="col align-self-start">
						<textarea style="white-space: pre-wrap; font-family:monospace; min-width: 100%;" rows="8"
							id="target" placeholder="(results)"></textarea>
					</div>
				</div>
			</div>
		</main>

		<footer class="pt-5 my-5 text-muted border-top">
			As per the <a href="https://raw.githubusercontent.com/tresoldi/panphylo/main/LICENSE">MIT license</a>
			covering the <a href="https://github.com/tresoldi/panphylo">panphylo library</a>,
			this software is provided "as is",
			without warranty of any kind, express or implied, including but not limited to the
			warranty of fitness for a particualr purpose. In no event shall the authors be liable for
			any claim, damages or other liability, whehter in an action of contract, tort, or
			otherwise, arising from, out of or in connection with the software or the use or
			other dealings in the software.
		</footer>

	</div>

</body>

</html>